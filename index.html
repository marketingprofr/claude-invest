<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outil de Trading Automatis√© - B√∂rse Frankfurt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="max-w-6xl mx-auto p-6">
        <div class="bg-white rounded-xl shadow-lg p-6">
            <!-- Header -->
            <header class="text-center mb-8">
                <div class="flex items-center justify-center mb-4">
                    <i data-lucide="calculator" class="w-8 h-8 text-blue-600 mr-3"></i>
                    <h1 class="text-3xl font-bold text-gray-800">Trading Automatis√© - B√∂rse Frankfurt</h1>
                </div>
                <p class="text-gray-600">Donn√©es ETF en temps r√©el depuis B√∂rse Frankfurt</p>
                <div class="mt-2 flex items-center justify-center">
                    <div class="text-sm text-blue-600 bg-blue-50 px-4 py-2 rounded-lg">
                        üìÖ <span id="current-date"></span>
                    </div>
                </div>
            </header>

            <!-- Configuration -->
            <div class="mb-8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200">
                <h2 class="text-lg font-semibold mb-4 text-green-800">üèõÔ∏è Configuration B√∂rse Frankfurt</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ETF D√©tenu</label>
                        <select id="current-stock" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-lg font-semibold">
                            <option value="IWDA">IWDA (iShares Core MSCI World)</option>
                            <option value="VWCE" selected>VWCE (Vanguard FTSE All-World)</option>
                            <option value="MEUD">MEUD (Amundi STOXX Europe 600)</option>
                            <option value="IMAE">IMAE (iShares Core MSCI Europe)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Valeur Portefeuille (‚Ç¨)</label>
                        <input
                            type="number"
                            id="portfolio-value"
                            value="100000"
                            class="w-full p-3 border border-gray-300 rounded-lg text-lg font-semibold"
                        />
                    </div>
                </div>

                <!-- Informations du portefeuille virtuel -->
                <div id="portfolio-info" class="mb-4">
                    <!-- Contenu g√©n√©r√© dynamiquement -->
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex space-x-4">
                        <button
                            id="refresh-btn"
                            class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center font-semibold"
                        >
                            <i data-lucide="refresh-cw" class="w-5 h-5 mr-2"></i>
                            Actualiser les Cours
                        </button>
                        
                        <button
                            id="test-connection-btn"
                            class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center"
                        >
                            <i data-lucide="play" class="w-4 h-4 mr-2"></i>
                            Test Connexion
                        </button>
                    </div>
                    
                    <div id="last-refresh" class="text-sm text-gray-600"></div>
                </div>
                
                <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                    <p class="text-blue-800 text-sm">
                        ‚ÑπÔ∏è <strong>Source de donn√©es:</strong> API B√∂rse Frankfurt (api.boerse-frankfurt.de)
                        <br>‚Ä¢ API publique gratuite - pas de cl√© requise
                        <br>‚Ä¢ Cours ETF en temps r√©el pendant les heures de march√©
                        <br>‚Ä¢ Mise √† jour automatique toutes les 15 minutes
                        <br>‚Ä¢ URL API: https://api.boerse-frankfurt.de/v1/data/quote_box/single?isin=...
                    </p>
                </div>
                
                <div id="debug-info" class="mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                    <h4 class="font-semibold text-gray-800 mb-2">üîç Informations de d√©bogage</h4>
                    <div id="debug-content" class="text-sm text-gray-700 font-mono"></div>
                    <button id="toggle-debug" class="mt-2 text-blue-600 hover:underline text-sm">Afficher/Masquer logs</button>
                </div>
            </div>

            <!-- Tableau des cours -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-4 flex items-center">
                    <i data-lucide="trending-up" class="w-5 h-5 mr-2 text-green-600"></i>
                    Cours en Temps R√©el - B√∂rse Frankfurt
                </h2>
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse border border-gray-300 rounded-lg overflow-hidden">
                        <thead>
                            <tr class="bg-gradient-to-r from-green-600 to-emerald-600 text-white">
                                <th class="border border-gray-300 px-4 py-3 text-left">ETF</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Prix Actuel (‚Ç¨)</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Variation Journali√®re</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Delta vs <span id="header-current-stock">VWCE</span></th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Derni√®re MAJ</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody id="etf-table-body">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recommandations -->
            <div id="recommendation-section" class="mb-8 hidden">
                <h2 class="text-xl font-semibold mb-4 flex items-center">
                    <i data-lucide="alert-triangle" class="w-5 h-5 mr-2 text-orange-600"></i>
                    Signal de Trading Automatique
                </h2>
                <div id="recommendation-content">
                    <!-- Contenu g√©n√©r√© dynamiquement -->
                </div>
            </div>

            <!-- Analyse des deltas -->
            <div id="deltas-section" class="mb-8 hidden">
                <h2 class="text-xl font-semibold mb-4">Analyse Temps R√©el des Opportunit√©s</h2>
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse border border-gray-300 rounded-lg overflow-hidden">
                        <thead>
                            <tr class="bg-gradient-to-r from-purple-600 to-pink-600 text-white">
                                <th class="border border-gray-300 px-4 py-3 text-left">Rang</th>
                                <th class="border border-gray-300 px-4 py-3 text-left">√âchange</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Delta Actuel</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Signal</th>
                                <th class="border border-gray-300 px-4 py-3 text-center">Gain Potentiel</th>
                            </tr>
                        </thead>
                        <tbody id="deltas-table-body">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Instructions -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                <h3 class="font-semibold text-green-800 mb-2">üèõÔ∏è Trading avec B√∂rse Frankfurt - Mode d'emploi</h3>
                <div class="text-green-700 text-sm space-y-2">
                    <p><strong>1.</strong> Aucune cl√© API requise - utilise l'API publique de B√∂rse Frankfurt</p>
                    <p><strong>2.</strong> Cliquez "Test Connexion" pour v√©rifier l'acc√®s √† l'API</p>
                    <p><strong>3.</strong> Si le test √©choue (CORS), utilisez Firefox ou une extension CORS</p>
                    <p><strong>4.</strong> Cliquez "Actualiser les Cours" pour r√©cup√©rer les prix r√©els</p>
                    <p><strong>5.</strong> <strong>üîî Notifications activ√©es</strong> - vous serez alert√© automatiquement des opportunit√©s !</p>
                    <p><strong>6.</strong> <strong>üíº Portefeuille virtuel</strong> - cliquez "Acheter" pour simuler des trades r√©els</p>
                    <p><strong>7.</strong> Suivez les signaux üöÄ : <strong>Delta > 0.5% = TRADER IMM√âDIATEMENT !</strong></p>
                </div>
                
                <div class="mt-3 p-3 bg-blue-50 border border-blue-200 rounded">
                    <p class="text-blue-800 text-sm">
                        <strong>üí° Nouvelles Fonctionnalit√©s:</strong>
                        <br>‚Ä¢ <strong>Portefeuille virtuel</strong> avec gestion des actions et fractions
                        <br>‚Ä¢ <strong>Logs de trading d√©taill√©s</strong> pour chaque achat/vente
                        <br>‚Ä¢ <strong>Calcul automatique</strong> des gains/pertes et frais de courtage
                        <br>‚Ä¢ <strong>Suivi de performance</strong> avec statistiques compl√®tes
                        <br>‚Ä¢ <strong>Export des donn√©es</strong> pour analyse externe
                        <br>‚Ä¢ <strong>Boutons d'achat</strong> directement dans le tableau des ETF
                    </p>
                </div>
                
                <div class="mt-3 p-3 bg-blue-50 border border-blue-200 rounded">
                    <p class="text-blue-800 text-sm">
                        <strong>üí° API B√∂rse Frankfurt + Notifications:</strong>
                        <br>‚Ä¢ <strong>Donn√©es r√©elles</strong> depuis l'API officielle
                        <br>‚Ä¢ <strong>Notifications navigateur</strong> pour les signaux de trade
                        <br>‚Ä¢ <strong>Alertes automatiques</strong> quand delta > 0.5%
                        <br>‚Ä¢ <strong>Calcul en temps r√©el</strong> des opportunit√©s
                        <br>‚Ä¢ <strong>Auto-refresh 15min</strong> avec surveillance continue
                    </p>
                </div>
                
                <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded">
                    <p class="text-yellow-800 text-sm">
                        <strong>‚ö†Ô∏è CORS Solutions:</strong> L'API fonctionne mais les navigateurs bloquent les requ√™tes cross-origin.
                        <br><strong>Chrome:</strong> <code>chrome --disable-web-security --user-data-dir=/tmp/chrome_dev</code>
                        <br><strong>Extensions:</strong> "CORS Unblock" (Chrome) ou "CORS Everywhere" (Firefox)
                        <br><strong>Auto:</strong> L'outil essaie automatiquement des proxies CORS publics
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts modulaires -->
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/debug.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/portfolio.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/trading.js"></script>
    <script type="module" src="js/notifications.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>